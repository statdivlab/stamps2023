---
title: "01: Data in R"
author: "Sarah Teichman"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

In this tutorial, we will go through working with data in R. We will see how to load data, how to "meet" a dataset, and break down the basic data types in R. 

## File preparation 

Before we load in our data, we need to make sure that we are in the correct working directory. Use the Files pane to locate the `data` folder that you have downloaded (if working with R locally) or uploaded (if working with the R Studio server). This folder should contain files `FWS_covariates.txt` and `FWS_OTUs.txt`. 

Now, check your working directory with `getwd()`. You want your working directory to be the folder that **contains** the `data` folder. Change your working directory to the appropriate folder with `setwd()`. For example, if the output to `getwd()` is "/Users/you/Documents" but you have saved your `data` folder in a sub-folder of `Documents` called `stamps`, you would run `setwd("stamps")`. Check you're in the current folder by running `getwd()` again. 

## Reading in data 

Now that we are in the right working directory, we can read in the data. 

```{r}
covariates <- read.csv("data/FWS_covariates.txt", sep = "\t")
abundances <- read.csv("data/FWS_OTUs.txt", sep = "\t", row.names = 1, header = T)
```

Once you have run the code above, you should see a difference in your environment. You now should have two objects in your environment. You should see that `abundances` has 387 observations of 12 variables and `covariates` has 12 observations of 5 variables. What happens when you click on `abundances` object in the environment? 

## "Meeting" your data 

The first thing to do after loading in data is to get a feel for it. How much data do you have? How is it organized? What are the observations and what are the variables? 

If you want to know the dimension of your data without looking at the environment, you can use the function `dim()`. This will return two values, the number of rows and number of columns respectively. 

```{r}
dim(covariates)
dim(abundances)

# we could also just get the number of rows or columns
nrow(covariates)
ncol(covariates)
```

Now that we know how big our data is, we may want to know what variables are in our data. The function `names()` will give us variable names. The function `row.names()` will give us row names (if they exist in our data). 

```{r}
# variable names
names(covariates)
names(abundances)

# row names
row.names(covariates)
# there are a lot of row names, we'll just look at the first 5
row.names(abundances)[1:5] 
```

Finally, we may want to take a look at the first few rows of the data to see how it is organized. We can do this with the function `head()`. 

```{r}
head(covariates)
head(abundances)
```

From these few lines of code, give an overview of the `covariates` dataset.

Give an overview of the `abundances` dataset. 

How are these datasets related to each other? 

## The components of a dataset 

The most basic object in R is a single value. This could be a number, a character (quotes must be used to define a character object), a logical value (TRUE or FALSE), or other data types that we won't discuss today. 

```{r}
x <- 5
# check the class (data type) of x
class(x)
y <- "hello"
# check the class of y
class(y)
z <- TRUE
class(z)
```

Values can be organized into vectors. The function `c()` will concatenate objects into a vector. 

```{r}
vec <- c(x, y, z)
vec
# check the length of vec
length(vec)
# check the class of vec
class(vec)
```

What happened here? Vectors must contain the same type of data, so `x`, `y`, and `z` were all converted to character values. 

```{r}
vec_num <- c(6, 1, -3)
class(vec_num)
vec_log <- c(TRUE, TRUE, FALSE)
class(vec_log)
```

To extract one or multiple values in a vector we use the indices of those values in square brackets. 

```{r}
vec[1]
vec_num[3]
vec_log[1:2]
vec[c(1, 3)]
```

We can also perform mathematical and logical operations on vectors. 

```{r}
# add 4 to each value of vec_num
vec_num + 4
# check each element of vec_num to see if it is equal to 1
vec_num == 1
# check each element of vec_num to see if it is less or equal to 5
vec_num <= 5
# subset based on logical vector 
vec_num[vec_num <= 5]
# check each element of vec to see if it is the string "hello" 
vec == "hello"
```

Another data type that holds multiple values in R is a list. A list can take different data types and can include a name for each value. There are multiple ways to subset from a list, either double square brackets with an index or the `$` operator with the object name. 

```{r}
my_list <- list("number" = 5, letter = "a", logical = TRUE)
my_list[[1]]
my_list$letter

# we can also add vectors to our list
my_list$vec_char <- vec
my_list$vec_num <- vec_num
my_list$vec_log <- vec_log

# what does our list look like now?
my_list
```

What about our `abundances` and `covariates` objects? What data type are they? 

```{r}
class(abundances)
class(covariates)
```

A `data.frame` is a list that is made up of multiple vectors (representing variables) where each vector must be the same length. 

```{r}
covariates$Month
class(covariates$Month)
abundances$JPA_Jan
class(abundances$JPA_Jan)
```

A data frame has rows and columns, so if we want to subset from it we need to use a square bracket with multiple indices separated by commas. 

```{r}
# get the 1st observation of the 3rd variable 
covariates[1, 3]
# get the 5th observation of the last three variables 
ncol(covariates)
covariates[5, 3:5]
# get all observations for the 1st variable 
covariates[, 1]
# get the 10th observation for all variables 
covariates[10, ]
# get the 4th observation of the variable "Season" 
covariates$Season[4]
```

Exercise: Extract the value from the 5th observation of `covariates` for the variable "Season." 

```{r}

```

Challenge exercise: What is the count of "Bacteria;Acidobacteria;Holophagae;Holophagales;Holophagaceae;Geothrix" for the first observation listed in the `covariates` data frame collected in "Summer"? 

```{r}

```